server:
  port: ${PORT:8082}
  forward-headers-strategy: framework

spring:
  application:
    name: maintenance-service
  cloud:
    gcp:
      sql:
        enabled: ${CLOUD_SQL_ENABLED:false}
        instance-connection-name: ${CLOUD_SQL_INSTANCE:}
        database-name: ${CLOUD_SQL_DB:homegenie_maintenance}
      storage:
        bucket: ${GCP_STORAGE_BUCKET:homegenie-maintenance-uploads}
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/homegenie_maintenance}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=500,expireAfterWrite=300s
  rabbitmq:
    addresses: ${RABBITMQ_URL:}
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:guest}
    password: ${RABBITMQ_PASSWORD:guest}
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
      ssl:
        enabled: ${REDIS_SSL:false}

gcp:
  storage:
    bucket-name: ${GCP_STORAGE_BUCKET:homegenie-maintenance-uploads}
storage:
  type: ${STORAGE_TYPE:s3}

user:
  service:
    url: ${USER_SERVICE_URL:http://localhost:8081}

admin:
  email: ${ADMIN_EMAIL:admin@homegenie.com}

voice:
  service:
    url: ${VOICE_SERVICE_URL:http://localhost:5000}
  assistant:
    timeout: 30000

resilience4j:
  circuitbreaker:
    instances:
      voiceService:
        registerHealthIndicator: true
        slidingWindowSize: 10
        failureRateThreshold: 50
        waitDurationInOpenState: 30s
        permittedNumberOfCallsInHalfOpenState: 3
        slowCallDurationThreshold: 5s
        slowCallRateThreshold: 80
        minimumNumberOfCalls: 5

gcs:
  bucket-name: ${GCS_BUCKET_NAME:homegenie-uploads}
  project-id: ${GCS_PROJECT_ID:homegenie}

aws:
  access-key: ${AWS_ACCESS_KEY:none}
  secret-key: ${AWS_SECRET_KEY:none}
  region: ${AWS_REGION:us-east-1}
  s3:
    bucket-name: ${S3_BUCKET_NAME:homegenie-uploads}

local:
  storage:
    path: ${LOCAL_STORAGE_PATH:./local_images}
    base-url: ${LOCAL_STORAGE_BASE_URL:http://localhost:8082/local/images}

huggingface:
  api:
    token: ${HUGGINGFACE_API_TOKEN:}

ai:
  classification:
    enabled: true

email:
  notification:
    enabled: ${EMAIL_NOTIFICATION_ENABLED:false}
    from: ${EMAIL_FROM:noreply@homegenie.com}
    admin: ${ADMIN_EMAIL:admin@homegenie.com}
    provider: ${EMAIL_PROVIDER:smtp}
  smtp:
    host: ${SMTP_HOST:smtp.gmail.com}
    port: ${SMTP_PORT:587}
    username: ${SMTP_USERNAME:}
    password: ${SMTP_PASSWORD:}

management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
  health:
    db:
      enabled: false
    rabbitmq:
      enabled: false
    circuitbreakers:
      enabled: true

logging:
  level:
    root: INFO
    com.homegenie: DEBUG
